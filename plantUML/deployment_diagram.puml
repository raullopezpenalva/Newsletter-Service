@startuml deployment_diagram_newsletter_service

title Deployment Diagram - Newsletter Service

node "Docker Host / VPS / Cloud Node" {
  
  node "Docker Container: newsletter-service" {
  component "Spring Boot App\n(newsletter-service.jar)"
  component "OpenAPI / Swagger UI"
  }

  node "Docker Container: PostgreSQL" {
  database "PostgreSQL DB"
  }

  node "Docker Container: Mailhog\n(or real SMTP)" {
  component "SMTP Server"
  }
}

node "Frontend Web App\n(on another host or CDN)" {
  component "Web Client"
}

node "Email Sending Service\n(external microservice)" {
  component "API Consumer"
}

"Web Client" --> "Spring Boot App\n(newsletter-service.jar)" : HTTP (subscribe/verify/unsubscribe)
"API Consumer" --> "Spring Boot App\n(newsletter-service.jar)" : HTTP (get unsubscribe link)
"Spring Boot App\n(newsletter-service.jar)" --> "PostgreSQL DB" : JDBC
"Spring Boot App\n(newsletter-service.jar)" --> "SMTP Server" : SMTP (port 587/1025)

@enduml
